<div class="networkswitchings-header">
  <h2>Network Switchings</h2>
  <button class="btn btn-default add-networkswitch" (click)="insert()"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span>Create New Network Switching</button>
</div>

<div [hidden]="!errormessage"
     class="alert alert-danger">
  {{errormessage}}
</div>

<div class="networkswitchings"
     infinite-scroll
     [infiniteScrollDistance]="1.5"
     [infiniteScrollThrottle]="500"
     (scrolled)="onScrollDown()"
     (scrolledUp)="onScrollUp()"
     (window:resize)="onResize()">

<!--
    <div>
      <label for="sort1">Sort Primary By:</label>
      <select id="sort1" [(ngModel)]="sortingColumn1" (ngModelChange)="sortOrderChanged(sortingColumn1)">
        <option *ngFor="let sortingColumn of availableSortingColumns" [ngValue]="sortingColumn">
          {{sortingColumn.text}}
        </option>
      </select>
    </div>
    <div>
      <label for="sort2">Sort Secondary By:</label>
      <select id="sort2" [(ngModel)]="sortingColumn2" (ngModelChange)="sortOrderChanged(sortingColumn1)">
        <option *ngFor="let sortingColumn of availableSortingColumns" [ngValue]="sortingColumn">
          {{sortingColumn.text}}
        </option>
      </select>
    </div>
-->
  <div class="networkswitchings-filter">
    <input type="text" class="form-control" placeholder="Search for..." #searchInp id="searchInput" (keyup)="search(searchInp.value)">
  </div>

  <div class="networkswitch-sorting">
    <ul class="nav nav-tabs">
      <li class="active"><a data-toggle="pill" href="#sorting-general">General</a></li>
      <li><a data-toggle="pill" href="#sorting-source">Source</a></li>
      <li><a data-toggle="pill" href="#sorting-destination">Destination</a></li>
      <button class="btn btn-default pull-right reset" (click)="resetSorting()"><span class="glyphicon glyphicon-repeat" aria-hidden="true"></span>Reset Sorting</button>
    </ul>

    <div class="tab-content well">
      <div id="sorting-general" class="network-header-row tab-pane in active">
  <!--
        <button class="sort-btn" (click)="sortingButtonClicked('id')">ID
          <sort-indicator ascending="{{isAscending('id')}}" order="{{getOrder('id')}}"></sort-indicator>
        </button>
      -->
        <sort-button [sorting]="SortingID" [sortingList]="sortingList" (sortingChanged)="sortingChanged()"></sort-button>
        <sort-button [sorting]="SortingSTATE" [sortingList]="sortingList" (sortingChanged)="sortingChanged()"></sort-button>
        <sort-button [sorting]="SortingUSER" [sortingList]="sortingList" (sortingChanged)="sortingChanged()"></sort-button>
        <sort-button [sorting]="SortingTEST_STATE" [sortingList]="sortingList" (sortingChanged)="sortingChanged()"></sort-button>
      </div>
      <div id="sorting-source" class="network-header-row tab-pane fade">
        <sort-button [sorting]="SortingSOURCE_ZONE" [sortingList]="sortingList" (sortingChanged)="sortingChanged()"></sort-button>
        <sort-button [sorting]="SortingSOURCE_GROUP" [sortingList]="sortingList" (sortingChanged)="sortingChanged()"></sort-button>
        <sort-button [sorting]="SortingSOURCE_HOST" [sortingList]="sortingList" (sortingChanged)="sortingChanged()"></sort-button>
        <sort-button [sorting]="SortingSOURCE_IP" [sortingList]="sortingList" (sortingChanged)="sortingChanged()"></sort-button>
      </div>
      <div id="sorting-destination" class="network-header-row tab-pane fade">
        <sort-button [sorting]="SortingDESTINATION_ZONE" [sortingList]="sortingList" (sortingChanged)="sortingChanged()"></sort-button>
        <sort-button [sorting]="SortingDESTINATION_GROUP" [sortingList]="sortingList" (sortingChanged)="sortingChanged()"></sort-button>
        <sort-button [sorting]="SortingDESTINATION_HOST" [sortingList]="sortingList" (sortingChanged)="sortingChanged()"></sort-button>
        <sort-button [sorting]="SortingDESTINATION_IP" [sortingList]="sortingList" (sortingChanged)="sortingChanged()"></sort-button>
        <sort-button [sorting]="SortingDESTINATION_PORT" [sortingList]="sortingList" (sortingChanged)="sortingChanged()"></sort-button>
      </div>
    </div>
  </div>
  <div class="view-switcher hidden-xs hidden-sm hidden-md">
    <span class="view-switcher-label">Switch view</span>
    <button class="btn btn-default" name="view" value="mobile" (click)="setNetworkswitchView(true)" [ngClass]="mobileView ? 'active' : ''" >Mobile</button>
    <button class="btn btn-default" name="view" value="list" (click)="setNetworkswitchView(false)" [ngClass]="!mobileView ? 'active' : ''">List</button>
  </div>
  <div class="networkswitch-container mobile-view" *ngIf="mobileView">
    <div class="networkswitch"
         [ngClass]="nwsw == null ? '' : nwsw.getSystemEnvironmentCssClass()"
         *ngFor="let nwsw of networkswitchings"
         [routerLink]="['/detail', getProjectId(), nwsw._id]">
      <div class="network-part-title main-network-part-title">General</div>
      <div class="network-part">
        <div class="networkswitch-label">ID:</div><div class="networkswitch-value">{{nwsw.id}}</div>
        <div class="networkswitch-label">State:</div><div class="networkswitch-value">{{nwsw.state}}</div>
        <div class="networkswitch-label">User:</div><div class="networkswitch-value">{{nwsw.creationBy}}</div>
        <div class="networkswitch-label">Teststate:</div>
        <div>
          <test-status [result]="nwsw.getLastTeststateResult()"></test-status>
          {{nwsw.getLastTeststateTimestamp() | date:DATE_FORMAT | prePostfix:'(':')'}}
        </div>
      </div>
      <div class="network-part-title">Source</div>
      <div class="network-part">
        <div class="networkswitch-label">Zone:</div><div class="networkswitch-value">{{nwsw.source.zone}}</div>
        <div class="networkswitch-label">Group:</div><div class="networkswitch-value">{{nwsw.source.group}}</div>
        <div class="networkswitch-label">Host:</div><div class="networkswitch-value">{{nwsw.source.host}}</div>
        <div class="networkswitch-label">IpAddr:</div><div class="networkswitch-value">{{nwsw.source.ipAddr}}</div>
      </div>
      <div class="network-part-title">Destination</div>
      <div class="network-part">
        <div class="networkswitch-label">Zone:</div><div class="networkswitch-value">{{nwsw.destination.zone}}</div>
        <div class="networkswitch-label">Group:</div><div class="networkswitch-value">{{nwsw.destination.group}}</div>
        <div class="networkswitch-label">Host:</div><div class="networkswitch-value">{{nwsw.destination.host}}</div>
        <div class="networkswitch-label">IpAddr:</div><div class="networkswitch-value">{{nwsw.destination.ipAddr}}</div>
        <div class="networkswitch-label">Port:</div><div class="networkswitch-value">{{nwsw.destination.port}}</div>
      </div>
    </div>
  </div>
  <div class="networkswitch-container desktop-view" *ngIf="!mobileView">
      <table class="table table-hover networkswitch-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>State</th>
            <th>User</th>
            <th>Teststate</th>
            <th>Zone</th>
            <th>Group</th>
            <th>Host</th>
            <th>IpAddr</th>
            <th>Zone</th>
            <th>Group</th>
            <th>Host</th>
            <th>IpAddr</th>
            <th>Port</th>
          </tr>
        </thead>
        <tbody>
          <tr [ngClass]="nwsw == null ? '' : nwsw.getSystemEnvironmentCssClass()"
              *ngFor="let nwsw of networkswitchings"
              [routerLink]="['/detail', getProjectId(), nwsw._id]">
            <td>{{nwsw.id}}</td>
            <td>{{nwsw.state}}</td>
            <td>{{nwsw.creationBy}}</td>
            <td>
              <test-status [result]="nwsw.getLastTeststateResult()"></test-status>
              {{nwsw.getLastTeststateTimestamp() | date:DATE_FORMAT | prePostfix:'(':')'}}
            </td>
            <td>{{nwsw.source.zone}}</td>
            <td>{{nwsw.source.group}}</td>
            <td>{{nwsw.source.host}}</td>
            <td>{{nwsw.source.ipAddr}}</td>
            <td>{{nwsw.destination.zone}}</td>
            <td>{{nwsw.destination.group}}</td>
            <td>{{nwsw.destination.host}}</td>
            <td>{{nwsw.destination.ipAddr}}</td>
            <td>{{nwsw.destination.port}}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div *ngIf="networkswitchings?.length <= 0 && !isLoading" class="empty-networkswitch-message">
      <h2>Oh, it looks like you have no networkswitches :(</h2>
      <h2>A friend needs to invite you or you can create your own networkswitches here:</h2>
      <button class="btn btn-default add-networkswitch" (click)="insert()"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span>Create New Network Switching</button>
    </div>
</div>


